<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.tech.petfriends.login.mapper.MemberMapper">

    <!-- 이메일과 비밀번호로 회원을 조회 -->
    <select id="getMemberByEmail" parameterType="String" resultType="com.tech.petfriends.login.dto.MemberLoginDto">
	    SELECT * 
	    FROM MEMBER 
	    WHERE MEM_EMAIL = #{email} 
	</select>
	
	<!-- 회원 정보를 DB에 저장 -->
    <insert id="insertMember" parameterType="com.tech.petfriends.login.dto.MemberLoginDto">
        INSERT INTO MEMBER (mem_code, mem_email, mem_pw, mem_nick, mem_tell, mem_name, mem_birth, mem_gender, mem_invite, mem_regdate, mem_logdate)
        VALUES (#{mem_code}, #{mem_email}, #{mem_pw}, #{mem_nick}, #{mem_tell}, #{mem_name}, #{mem_birth}, #{mem_gender}, #{mem_invite}, #{mem_regdate}, #{mem_logdate})
    </insert>

	<!-- 회원가입시 닉네임 중복 조회 -->
	<select id="isNicknameDuplicate" resultType="int" parameterType="String">
    	SELECT COUNT(*) FROM MEMBER WHERE mem_nick = #{nickname}
	</select>

</mapper>
