<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.tech.petfriends.admin.mapper.AdminPageDao"> 
	<select id="getPetteacherList" resultType="com.tech.petfriends.helppetf.dto.PetteacherDto">
		SELECT * FROM HELP_PETTEACHER
		<where>
			<choose>
				<when test="type == '전체'">HPT_HIT >= 0</when>
				<when test="type == '고양이'">HPT_PETTYPE = '고양이'</when>
				<when test="type == '강아지'">HPT_PETTYPE = '강아지'</when>
				<when test="type == '기타 동물'">HPT_PETTYPE = '기타 동물'</when>
			</choose>
			<choose>
				<when test="category == '전체'">AND HPT_SEQ >= 0</when>
				<when test="category == '훈련'">AND HPT_CATEGORY = '훈련'</when>
				<when test="category == '건강'">AND HPT_CATEGORY = '건강'</when>
				<when test="category == '습관'">AND HPT_CATEGORY = '습관'</when>
				<when test="category == '관찰'">AND HPT_CATEGORY = '관찰'</when>
				<when test="category == '케어'">AND HPT_CATEGORY = '케어'</when>
				<when test="category == '생활'">AND HPT_CATEGORY = '생활'</when>
			</choose>
		</where>
		<choose>
			<when test="sort == '최신순'">ORDER BY HPT_RGEDATE DESC</when>
			<when test="sort == '오래된순'">ORDER BY HPT_RGEDATE ASC</when>
			<when test="sort == '조회수순'">ORDER BY HPT_HIT DESC</when>
		</choose>
	</select>
	<select id="adminPetteacherDetail"
		resultType="com.tech.petfriends.helppetf.dto.PetteacherDto">
		SELECT * FROM HELP_PETTEACHER
		WHERE HPT_SEQ = #{hpt_seq}
	</select>
	<delete id="adminPetteacherDelete">
		DELETE FROM HELP_PETTEACHER WHERE HPT_SEQ = #{hpt_seq}
	</delete>
	
	<insert id="adminPetteacherWrite">
		INSERT INTO HELP_PETTEACHER VALUES
		(SEQ_HPT.NEXTVAL, #{hpt_yt_videoid}, 
		#{hpt_exp}, #{hpt_title}, #{hpt_content}, 
		#{hpt_pettype}, #{hpt_category}, 0, SYSDATE, #{hpt_channal})
	</insert>
	<update id="adminPetteacherEdit">
		UPDATE HELP_PETTEACHER 
		SET HPT_YT_VIDEOID = #{hpt_yt_videoid},
		HPT_EXP = #{hpt_exp}, 
		HPT_TITLE = #{hpt_title}, 
		HPT_CONTENT = #{hpt_content}, 
		HPT_PETTYPE = #{hpt_pettype}, 
		HPT_CATEGORY = #{hpt_category}, 
		HPT_CHANNAL = #{hpt_channal}		
		WHERE HPT_SEQ = #{hpt_seq}
	</update>
</mapper>